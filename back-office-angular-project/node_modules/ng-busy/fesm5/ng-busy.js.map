{"version":3,"file":"ng-busy.js.map","sources":["ng://ng-busy/lib/service/instance-config-holder.service.ts","ng://ng-busy/lib/model/busy-config.ts","ng://ng-busy/lib/util/isPromise.ts","ng://ng-busy/lib/service/busy-tracker.service.ts","ng://ng-busy/lib/service/busy-config-holder.service.ts","ng://ng-busy/lib/component/ng-busy/ng-busy.component.ts","ng://ng-busy/lib/ng-busy.directive.ts","ng://ng-busy/lib/ng-busy.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {IBusyConfig} from '../model/busy-config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InstanceConfigHolderService {\n  public config: IBusyConfig;\n  constructor() { }\n}\n","import {Subscription} from 'rxjs';\nimport {Component, TemplateRef, Type, Inject, ChangeDetectorRef} from '@angular/core';\nimport {InstanceConfigHolderService} from '../service/instance-config-holder.service';\n\nexport class BusyConfig implements IBusyConfig {\n  template: TemplateRef<any> | Type<any>;\n  templateNgStyle: {};\n  delay: number;\n  minDuration: number;\n  backdrop: boolean;\n  message: string;\n  wrapperClass: string;\n  disableAnimation: boolean;\n\n  constructor(config: IBusyConfig = {}) {\n    for (const option of Object.keys(BUSY_CONFIG_DEFAULTS)) {\n      this[option] = config[option] !== undefined ? config[option] : BUSY_CONFIG_DEFAULTS[option];\n    }\n  }\n}\n\n@Component({\n  selector: 'default-busy',\n  template: `\n      <div class=\"ng-busy-default-wrapper\">\n          <div class=\"ng-busy-default-sign\">\n              <div class=\"ng-busy-default-spinner\">\n                  <div class=\"bar1\"></div>\n                  <div class=\"bar2\"></div>\n                  <div class=\"bar3\"></div>\n                  <div class=\"bar4\"></div>\n                  <div class=\"bar5\"></div>\n                  <div class=\"bar6\"></div>\n                  <div class=\"bar7\"></div>\n                  <div class=\"bar8\"></div>\n                  <div class=\"bar9\"></div>\n                  <div class=\"bar10\"></div>\n                  <div class=\"bar11\"></div>\n                  <div class=\"bar12\"></div>\n              </div>\n              <div class=\"ng-busy-default-text\">{{message}}</div>\n          </div>\n      </div>\n  `,\n})\nexport class DefaultBusyComponent {\n\n  constructor(@Inject('instanceConfigHolder') private instanceConfigHolder: InstanceConfigHolderService) {\n  }\n\n  get message() {\n    return this.instanceConfigHolder.config.message;\n  }\n}\n\nexport interface IBusyConfig {\n  template?: TemplateRef<any> | Type<any>;\n  templateNgStyle?: {};\n  delay?: number;\n  minDuration?: number;\n  backdrop?: boolean;\n  message?: string;\n  wrapperClass?: string;\n  busy?: Array<Promise<any> | Subscription>;\n  disableAnimation?: boolean;\n}\n\nexport const BUSY_CONFIG_DEFAULTS = {\n  template: DefaultBusyComponent,\n  templateNgStyle: {},\n  delay: 0,\n  minDuration: 0,\n  backdrop: true,\n  message: 'Please wait...',\n  wrapperClass: 'ng-busy',\n  disableAnimation: false\n};\n","export function isPromise(value: any): value is PromiseLike<any> {\n  return value && typeof (<any>value).subscribe !== 'function' && typeof (value as any).then === 'function';\n}\n","import {EventEmitter, Injectable, OnDestroy} from '@angular/core';\nimport {Subscription, from, timer} from 'rxjs';\nimport {isPromise} from '../util/isPromise';\n\nexport interface TrackerOptions {\n  minDuration: number;\n  delay: number;\n  busyList: Array<Promise<any> | Subscription>;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BusyTrackerService implements OnDestroy {\n\n  private isDelayProcessing = false;\n  private isDurationProcessing = false;\n  private isBusiesProcessing = false;\n  private busyQueue: Array<Subscription> = [];\n  private __isActive = false;\n\n  onStartBusy: EventEmitter<any> = new EventEmitter();\n  onStopBusy: EventEmitter<any> = new EventEmitter();\n\n  get isActive(): boolean {\n    return this.__isActive;\n  }\n\n  set isActive(val: boolean) {\n    if (this.__isActive === false && val === true && this.onStartBusy) {\n      this.onStartBusy.emit();\n    }\n    if (this.__isActive === true && val === false && this.onStopBusy) {\n      this.isBusiesProcessing = false;\n      this.onStopBusy.emit();\n    }\n    this.__isActive = val;\n  }\n  get busyList() {\n    return this.busyQueue;\n  }\n\n  constructor() {}\n\n  load(options: TrackerOptions) {\n    this.loadBusyQueue(options.busyList);\n    this.startLoading(options);\n  }\n\n  private updateActiveStatus() {\n    this.isActive = this.isBusiesProcessing &&\n      !this.isDelayProcessing &&\n      (this.isDurationProcessing || this.busyQueue.length > 0);\n  }\n\n  private startLoading(options: TrackerOptions) {\n    if (!this.isBusiesProcessing && this.busyList.length > 0) {\n      this.isBusiesProcessing = true;\n      this.isDelayProcessing = true;\n      this.updateActiveStatus();\n      timer(options.delay).subscribe(() => {\n        this.isDelayProcessing = false;\n        this.isDurationProcessing = true;\n        this.updateActiveStatus();\n        timer(options.minDuration).subscribe(() => {\n          this.isDurationProcessing = false;\n          this.updateActiveStatus();\n        });\n      });\n    }\n  }\n\n  private loadBusyQueue(busies: Array<Promise<any> | Subscription>) {\n    busies.filter((busy) => {\n      return busy && !busy.hasOwnProperty('__loaded_mark_by_ng_busy');\n    }).forEach((busy: Promise<any> | Subscription) => {\n      Object.defineProperty(busy, '__loaded_mark_by_ng_busy', {\n        value: true, configurable: false, enumerable: false, writable: false\n      });\n      let cur_busy;\n      if (isPromise(busy)) {\n        cur_busy = from(busy).subscribe();\n      } else {\n        cur_busy = busy;\n      }\n      this.appendToQueue(cur_busy);\n    });\n  }\n\n  private appendToQueue(busy: Subscription) {\n    this.busyQueue.push(busy);\n    busy.add(() => {\n      this.busyQueue = this.busyQueue.filter((cur: Subscription) => !cur.closed);\n      this.updateActiveStatus();\n    });\n  }\n\n  ngOnDestroy(): void {\n  }\n}\n","import {Injectable, Optional} from '@angular/core';\nimport {BUSY_CONFIG_DEFAULTS, BusyConfig} from '../model/busy-config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BusyConfigHolderService {\n  config: BusyConfig;\n\n  constructor(@Optional() config: BusyConfig) {\n    this.config = Object.assign({}, BUSY_CONFIG_DEFAULTS, config || new BusyConfig());\n  }\n}\n","import {ChangeDetectorRef, Component, EventEmitter, Inject, OnDestroy} from '@angular/core';\nimport {animate, style, transition, trigger} from '@angular/animations';\nimport {Subscription} from 'rxjs/internal/Subscription';\nimport {NgBusyDirective} from '../../ng-busy.directive';\nimport {InstanceConfigHolderService} from '../../service/instance-config-holder.service';\n\nconst inactiveStyle = style({\n  opacity: 0,\n  transform: 'translateY(-40px)'\n});\nconst timing = '.3s ease';\n\n@Component({\n  selector: 'lib-ng-busy',\n  template: `<div [class]=\"wrapperClass\" @flyInOut [@.disabled]=\"disableAnimation\" *ngIf=\"isActive\">\n  <ng-content></ng-content>\n</div>\n<div class=\"ng-busy-backdrop\" @flyInOut [@.disabled]=\"disableAnimation\" *ngIf=\"showBackdrop && isActive\">\n</div>\n`,\n  styles: [``],\n  animations: [\n    trigger('flyInOut', [\n      transition('void => *', [\n        inactiveStyle,\n        animate(timing)\n      ]),\n      transition('* => void', [\n        animate(timing, inactiveStyle)\n      ])\n    ])\n  ]\n})\nexport class NgBusyComponent implements OnDestroy {\n\n  public wrapperClass: string;\n  public disableAnimation = false;\n  public showBackdrop = true;\n  private readonly busyMonitor: Subscription;\n  isActive = false;\n\n  constructor(\n    @Inject('instanceConfigHolder') private instanceConfigHolder: InstanceConfigHolderService,\n    @Inject('busyEmitter') private busyEmitter: EventEmitter<boolean>,\n    private readonly cdr: ChangeDetectorRef\n  ) {\n    this.busyMonitor = this.busyEmitter.subscribe((isActive: boolean) => {\n      const config = this.instanceConfigHolder.config;\n      this.isActive = isActive;\n      this.wrapperClass = config.wrapperClass;\n      this.showBackdrop = config.backdrop;\n      this.disableAnimation = config.disableAnimation;\n      if (this.cdr) {\n        this.cdr.markForCheck();\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.busyMonitor) {\n      this.busyMonitor.unsubscribe();\n    }\n  }\n\n}\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver, ComponentRef,\n  Directive, DoCheck,\n  ElementRef,\n  EventEmitter, Injector,\n  Input, OnDestroy,\n  Output,\n  Renderer2,\n  TemplateRef, Type,\n  ViewContainerRef\n} from '@angular/core';\nimport { ViewRef } from '@angular/core/src/linker/view_ref';\nimport { BusyTrackerService } from './service/busy-tracker.service';\nimport { BusyConfigHolderService } from './service/busy-config-holder.service';\nimport { Subscription } from 'rxjs';\nimport { IBusyConfig } from './model/busy-config';\nimport { NgBusyComponent } from './component/ng-busy/ng-busy.component';\nimport { InstanceConfigHolderService } from './service/instance-config-holder.service';\nimport { isPromise } from './util/isPromise';\n\n@Directive({\n  selector: '[ngBusy]',\n  providers: [BusyTrackerService, InstanceConfigHolderService]\n})\nexport class NgBusyDirective implements DoCheck, OnDestroy {\n  @Input('ngBusy')\n  set options(op) {\n    this._option = op;\n  }\n\n  get options() {\n    return this._option;\n  }\n\n  @Output() busyStart = new EventEmitter();\n  @Output() busyStop = new EventEmitter();\n  private optionsNorm: IBusyConfig;\n  private busyRef: ComponentRef<NgBusyComponent>;\n  private componentViewRef: ViewRef;\n  private onStartSubscription: Subscription;\n  private onStopSubscription: Subscription;\n  private isLoading = false;\n  private busyEmitter: EventEmitter<boolean> = new EventEmitter<boolean>();\n  public template: TemplateRef<any> | Type<any>;\n  public templateNgStyle: {};\n  private _option: any;\n\n  constructor(private configHolder: BusyConfigHolderService,\n    private instanceConfigHolder: InstanceConfigHolderService,\n    private resolver: ComponentFactoryResolver,\n    private tracker: BusyTrackerService,\n    private appRef: ApplicationRef,\n    private vcr: ViewContainerRef,\n    private element: ElementRef,\n    private renderer: Renderer2,\n    private injector: Injector) {\n    this.onStartSubscription = tracker.onStartBusy.subscribe(() => {\n      setTimeout(() => {\n        this.recreateBusyIfNecessary();\n        this.isLoading = true;\n        this.busyEmitter.emit(this.isLoading);\n        this.busyStart.emit();\n      }, 0);\n    });\n    this.onStopSubscription = tracker.onStopBusy.subscribe(() => {\n      this.isLoading = false;\n      this.busyEmitter.emit(this.isLoading);\n      this.busyStop.emit();\n    });\n  }\n\n  ngDoCheck() {\n    this.optionsNorm = this.normalizeOptions(this.options);\n    this.instanceConfigHolder.config = this.optionsNorm;\n    this.tracker.load({\n      busyList: this.optionsNorm.busy,\n      delay: this.optionsNorm.delay,\n      minDuration: this.optionsNorm.minDuration\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyComponents();\n    this.onStartSubscription.unsubscribe();\n    this.onStopSubscription.unsubscribe();\n  }\n\n  private recreateBusyIfNecessary() {\n    if (!this.busyRef\n      || this.template !== this.optionsNorm.template\n      || this.templateNgStyle !== this.optionsNorm.templateNgStyle\n    ) {\n      this.destroyComponents();\n      this.template = this.optionsNorm.template;\n      this.templateNgStyle = this.optionsNorm.templateNgStyle;\n      this.createBusy();\n      this.busyEmitter.emit(this.isLoading);\n    }\n  }\n\n  private normalizeOptions(options: any): IBusyConfig {\n    if (!options) {\n      options = { busy: [] };\n    } else if (Array.isArray(options)\n      || isPromise(options)\n      || options instanceof Subscription\n    ) {\n      options = { busy: options };\n    }\n    options = Object.assign({}, this.configHolder.config, options);\n    if (!Array.isArray(options.busy)) {\n      options.busy = [options.busy];\n    }\n    return options;\n  }\n\n  private destroyComponents() {\n    if (this.busyRef) {\n      this.busyRef.destroy();\n    }\n    if (this.componentViewRef) {\n      this.appRef.detachView(this.componentViewRef);\n    }\n  }\n\n  private createBusy() {\n    const factory = this.resolver.resolveComponentFactory(NgBusyComponent);\n    const injector = Injector.create({\n      providers: [\n        {\n          provide: 'instanceConfigHolder',\n          useValue: this.instanceConfigHolder\n        },\n        {\n          provide: 'busyEmitter',\n          useValue: this.busyEmitter\n        }\n      ], parent: this.injector\n    });\n    this.template = this.optionsNorm.template;\n    this.busyRef = this.vcr.createComponent(factory, 0, injector, this.generateNgContent(injector));\n  }\n\n  private generateNgContent(injector: Injector) {\n    if (typeof this.template === 'string') {\n      const element = this.renderer.createText(this.template);\n      return [[element]];\n    }\n    if (this.template instanceof TemplateRef) {\n      const context = {};\n      const viewRef = this.template.createEmbeddedView(context);\n      return [viewRef.rootNodes];\n    }\n    const factory = this.resolver.resolveComponentFactory(this.template);\n    const componentRef = factory.create(injector);\n    componentRef.instance.templateNgStyle = this.options.templateNgStyle;\n    this.componentViewRef = componentRef.hostView;\n    this.appRef.attachView(this.componentViewRef);\n    return [[componentRef.location.nativeElement]];\n  }\n\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {BusyConfig, DefaultBusyComponent, IBusyConfig} from './model/busy-config';\nimport {CommonModule} from '@angular/common';\nimport {BusyTrackerService} from './service/busy-tracker.service';\nimport {BusyConfigHolderService} from './service/busy-config-holder.service';\nimport {NgBusyDirective} from './ng-busy.directive';\nimport {NgBusyComponent} from './component/ng-busy/ng-busy.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [DefaultBusyComponent, NgBusyDirective, NgBusyComponent],\n  providers: [BusyConfigHolderService, BusyTrackerService],\n  exports: [NgBusyDirective],\n  entryComponents: [DefaultBusyComponent, NgBusyComponent]\n})\nexport class NgBusyModule {\n  static forRoot(config: IBusyConfig): ModuleWithProviders {\n    return {\n      ngModule: NgBusyModule,\n      providers: [\n        {provide: BusyConfig, useValue: config}\n      ]\n    };\n  }\n}\n"],"names":["tslib_1.__values"],"mappings":"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"}
