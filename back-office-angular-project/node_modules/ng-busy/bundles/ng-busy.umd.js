(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('@angular/animations'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ng-busy', ['exports', '@angular/core', 'rxjs', '@angular/animations', '@angular/common'], factory) :
    (factory((global['ng-busy'] = {}),global.ng.core,global.rxjs,global.ng.animations,global.ng.common));
}(this, (function (exports,i0,rxjs,animations,common) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var InstanceConfigHolderService = /** @class */ (function () {
        function InstanceConfigHolderService() {
        }
        InstanceConfigHolderService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        InstanceConfigHolderService.ctorParameters = function () { return []; };
        /** @nocollapse */ InstanceConfigHolderService.ngInjectableDef = i0.defineInjectable({ factory: function InstanceConfigHolderService_Factory() { return new InstanceConfigHolderService(); }, token: InstanceConfigHolderService, providedIn: "root" });
        return InstanceConfigHolderService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BusyConfig = /** @class */ (function () {
        function BusyConfig(config) {
            var e_1, _a;
            if (config === void 0) {
                config = {};
            }
            try {
                for (var _b = __values(Object.keys(BUSY_CONFIG_DEFAULTS)), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var option = _c.value;
                    this[option] = config[option] !== undefined ? config[option] : BUSY_CONFIG_DEFAULTS[option];
                }
            }
            catch (e_1_1) {
                e_1 = { error: e_1_1 };
            }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return))
                        _a.call(_b);
                }
                finally {
                    if (e_1)
                        throw e_1.error;
                }
            }
        }
        return BusyConfig;
    }());
    var DefaultBusyComponent = /** @class */ (function () {
        function DefaultBusyComponent(instanceConfigHolder) {
            this.instanceConfigHolder = instanceConfigHolder;
        }
        Object.defineProperty(DefaultBusyComponent.prototype, "message", {
            get: /**
             * @return {?}
             */ function () {
                return this.instanceConfigHolder.config.message;
            },
            enumerable: true,
            configurable: true
        });
        DefaultBusyComponent.decorators = [
            { type: i0.Component, args: [{
                        selector: 'default-busy',
                        template: "\n      <div class=\"ng-busy-default-wrapper\">\n          <div class=\"ng-busy-default-sign\">\n              <div class=\"ng-busy-default-spinner\">\n                  <div class=\"bar1\"></div>\n                  <div class=\"bar2\"></div>\n                  <div class=\"bar3\"></div>\n                  <div class=\"bar4\"></div>\n                  <div class=\"bar5\"></div>\n                  <div class=\"bar6\"></div>\n                  <div class=\"bar7\"></div>\n                  <div class=\"bar8\"></div>\n                  <div class=\"bar9\"></div>\n                  <div class=\"bar10\"></div>\n                  <div class=\"bar11\"></div>\n                  <div class=\"bar12\"></div>\n              </div>\n              <div class=\"ng-busy-default-text\">{{message}}</div>\n          </div>\n      </div>\n  ",
                    },] },
        ];
        /** @nocollapse */
        DefaultBusyComponent.ctorParameters = function () {
            return [
                { type: InstanceConfigHolderService, decorators: [{ type: i0.Inject, args: ['instanceConfigHolder',] }] }
            ];
        };
        return DefaultBusyComponent;
    }());
    /** @type {?} */
    var BUSY_CONFIG_DEFAULTS = {
        template: DefaultBusyComponent,
        templateNgStyle: {},
        delay: 0,
        minDuration: 0,
        backdrop: true,
        message: 'Please wait...',
        wrapperClass: 'ng-busy',
        disableAnimation: false
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @param {?} value
     * @return {?}
     */
    function isPromise(value) {
        return value && typeof ( /** @type {?} */(value)).subscribe !== 'function' && typeof ( /** @type {?} */(value)).then === 'function';
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BusyTrackerService = /** @class */ (function () {
        function BusyTrackerService() {
            this.isDelayProcessing = false;
            this.isDurationProcessing = false;
            this.isBusiesProcessing = false;
            this.busyQueue = [];
            this.__isActive = false;
            this.onStartBusy = new i0.EventEmitter();
            this.onStopBusy = new i0.EventEmitter();
        }
        Object.defineProperty(BusyTrackerService.prototype, "isActive", {
            get: /**
             * @return {?}
             */ function () {
                return this.__isActive;
            },
            set: /**
             * @param {?} val
             * @return {?}
             */ function (val) {
                if (this.__isActive === false && val === true && this.onStartBusy) {
                    this.onStartBusy.emit();
                }
                if (this.__isActive === true && val === false && this.onStopBusy) {
                    this.isBusiesProcessing = false;
                    this.onStopBusy.emit();
                }
                this.__isActive = val;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BusyTrackerService.prototype, "busyList", {
            get: /**
             * @return {?}
             */ function () {
                return this.busyQueue;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} options
         * @return {?}
         */
        BusyTrackerService.prototype.load = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                this.loadBusyQueue(options.busyList);
                this.startLoading(options);
            };
        /**
         * @return {?}
         */
        BusyTrackerService.prototype.updateActiveStatus = /**
         * @return {?}
         */
            function () {
                this.isActive = this.isBusiesProcessing &&
                    !this.isDelayProcessing &&
                    (this.isDurationProcessing || this.busyQueue.length > 0);
            };
        /**
         * @param {?} options
         * @return {?}
         */
        BusyTrackerService.prototype.startLoading = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                var _this = this;
                if (!this.isBusiesProcessing && this.busyList.length > 0) {
                    this.isBusiesProcessing = true;
                    this.isDelayProcessing = true;
                    this.updateActiveStatus();
                    rxjs.timer(options.delay).subscribe(function () {
                        _this.isDelayProcessing = false;
                        _this.isDurationProcessing = true;
                        _this.updateActiveStatus();
                        rxjs.timer(options.minDuration).subscribe(function () {
                            _this.isDurationProcessing = false;
                            _this.updateActiveStatus();
                        });
                    });
                }
            };
        /**
         * @param {?} busies
         * @return {?}
         */
        BusyTrackerService.prototype.loadBusyQueue = /**
         * @param {?} busies
         * @return {?}
         */
            function (busies) {
                var _this = this;
                busies.filter(function (busy) {
                    return busy && !busy.hasOwnProperty('__loaded_mark_by_ng_busy');
                }).forEach(function (busy) {
                    Object.defineProperty(busy, '__loaded_mark_by_ng_busy', {
                        value: true, configurable: false, enumerable: false, writable: false
                    });
                    /** @type {?} */
                    var cur_busy;
                    if (isPromise(busy)) {
                        cur_busy = rxjs.from(busy).subscribe();
                    }
                    else {
                        cur_busy = busy;
                    }
                    _this.appendToQueue(cur_busy);
                });
            };
        /**
         * @param {?} busy
         * @return {?}
         */
        BusyTrackerService.prototype.appendToQueue = /**
         * @param {?} busy
         * @return {?}
         */
            function (busy) {
                var _this = this;
                this.busyQueue.push(busy);
                busy.add(function () {
                    _this.busyQueue = _this.busyQueue.filter(function (cur) { return !cur.closed; });
                    _this.updateActiveStatus();
                });
            };
        /**
         * @return {?}
         */
        BusyTrackerService.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
            };
        BusyTrackerService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        BusyTrackerService.ctorParameters = function () { return []; };
        /** @nocollapse */ BusyTrackerService.ngInjectableDef = i0.defineInjectable({ factory: function BusyTrackerService_Factory() { return new BusyTrackerService(); }, token: BusyTrackerService, providedIn: "root" });
        return BusyTrackerService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var BusyConfigHolderService = /** @class */ (function () {
        function BusyConfigHolderService(config) {
            this.config = Object.assign({}, BUSY_CONFIG_DEFAULTS, config || new BusyConfig());
        }
        BusyConfigHolderService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        BusyConfigHolderService.ctorParameters = function () {
            return [
                { type: BusyConfig, decorators: [{ type: i0.Optional }] }
            ];
        };
        /** @nocollapse */ BusyConfigHolderService.ngInjectableDef = i0.defineInjectable({ factory: function BusyConfigHolderService_Factory() { return new BusyConfigHolderService(i0.inject(BusyConfig, 8)); }, token: BusyConfigHolderService, providedIn: "root" });
        return BusyConfigHolderService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var inactiveStyle = animations.style({
        opacity: 0,
        transform: 'translateY(-40px)'
    });
    /** @type {?} */
    var timing = '.3s ease';
    var NgBusyComponent = /** @class */ (function () {
        function NgBusyComponent(instanceConfigHolder, busyEmitter, cdr) {
            var _this = this;
            this.instanceConfigHolder = instanceConfigHolder;
            this.busyEmitter = busyEmitter;
            this.cdr = cdr;
            this.disableAnimation = false;
            this.showBackdrop = true;
            this.isActive = false;
            this.busyMonitor = this.busyEmitter.subscribe(function (isActive) {
                /** @type {?} */
                var config = _this.instanceConfigHolder.config;
                _this.isActive = isActive;
                _this.wrapperClass = config.wrapperClass;
                _this.showBackdrop = config.backdrop;
                _this.disableAnimation = config.disableAnimation;
                if (_this.cdr) {
                    _this.cdr.markForCheck();
                }
            });
        }
        /**
         * @return {?}
         */
        NgBusyComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.busyMonitor) {
                    this.busyMonitor.unsubscribe();
                }
            };
        NgBusyComponent.decorators = [
            { type: i0.Component, args: [{
                        selector: 'lib-ng-busy',
                        template: "<div [class]=\"wrapperClass\" @flyInOut [@.disabled]=\"disableAnimation\" *ngIf=\"isActive\">\n  <ng-content></ng-content>\n</div>\n<div class=\"ng-busy-backdrop\" @flyInOut [@.disabled]=\"disableAnimation\" *ngIf=\"showBackdrop && isActive\">\n</div>\n",
                        styles: [""],
                        animations: [
                            animations.trigger('flyInOut', [
                                animations.transition('void => *', [
                                    inactiveStyle,
                                    animations.animate(timing)
                                ]),
                                animations.transition('* => void', [
                                    animations.animate(timing, inactiveStyle)
                                ])
                            ])
                        ]
                    },] },
        ];
        /** @nocollapse */
        NgBusyComponent.ctorParameters = function () {
            return [
                { type: InstanceConfigHolderService, decorators: [{ type: i0.Inject, args: ['instanceConfigHolder',] }] },
                { type: i0.EventEmitter, decorators: [{ type: i0.Inject, args: ['busyEmitter',] }] },
                { type: i0.ChangeDetectorRef }
            ];
        };
        return NgBusyComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgBusyDirective = /** @class */ (function () {
        function NgBusyDirective(configHolder, instanceConfigHolder, resolver, tracker, appRef, vcr, element, renderer, injector) {
            var _this = this;
            this.configHolder = configHolder;
            this.instanceConfigHolder = instanceConfigHolder;
            this.resolver = resolver;
            this.tracker = tracker;
            this.appRef = appRef;
            this.vcr = vcr;
            this.element = element;
            this.renderer = renderer;
            this.injector = injector;
            this.busyStart = new i0.EventEmitter();
            this.busyStop = new i0.EventEmitter();
            this.isLoading = false;
            this.busyEmitter = new i0.EventEmitter();
            this.onStartSubscription = tracker.onStartBusy.subscribe(function () {
                setTimeout(function () {
                    _this.recreateBusyIfNecessary();
                    _this.isLoading = true;
                    _this.busyEmitter.emit(_this.isLoading);
                    _this.busyStart.emit();
                }, 0);
            });
            this.onStopSubscription = tracker.onStopBusy.subscribe(function () {
                _this.isLoading = false;
                _this.busyEmitter.emit(_this.isLoading);
                _this.busyStop.emit();
            });
        }
        Object.defineProperty(NgBusyDirective.prototype, "options", {
            get: /**
             * @return {?}
             */ function () {
                return this._option;
            },
            set: /**
             * @param {?} op
             * @return {?}
             */ function (op) {
                this._option = op;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NgBusyDirective.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () {
                this.optionsNorm = this.normalizeOptions(this.options);
                this.instanceConfigHolder.config = this.optionsNorm;
                this.tracker.load({
                    busyList: this.optionsNorm.busy,
                    delay: this.optionsNorm.delay,
                    minDuration: this.optionsNorm.minDuration
                });
            };
        /**
         * @return {?}
         */
        NgBusyDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroyComponents();
                this.onStartSubscription.unsubscribe();
                this.onStopSubscription.unsubscribe();
            };
        /**
         * @return {?}
         */
        NgBusyDirective.prototype.recreateBusyIfNecessary = /**
         * @return {?}
         */
            function () {
                if (!this.busyRef
                    || this.template !== this.optionsNorm.template
                    || this.templateNgStyle !== this.optionsNorm.templateNgStyle) {
                    this.destroyComponents();
                    this.template = this.optionsNorm.template;
                    this.templateNgStyle = this.optionsNorm.templateNgStyle;
                    this.createBusy();
                    this.busyEmitter.emit(this.isLoading);
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        NgBusyDirective.prototype.normalizeOptions = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                if (!options) {
                    options = { busy: [] };
                }
                else if (Array.isArray(options)
                    || isPromise(options)
                    || options instanceof rxjs.Subscription) {
                    options = { busy: options };
                }
                options = Object.assign({}, this.configHolder.config, options);
                if (!Array.isArray(options.busy)) {
                    options.busy = [options.busy];
                }
                return options;
            };
        /**
         * @return {?}
         */
        NgBusyDirective.prototype.destroyComponents = /**
         * @return {?}
         */
            function () {
                if (this.busyRef) {
                    this.busyRef.destroy();
                }
                if (this.componentViewRef) {
                    this.appRef.detachView(this.componentViewRef);
                }
            };
        /**
         * @return {?}
         */
        NgBusyDirective.prototype.createBusy = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var factory = this.resolver.resolveComponentFactory(NgBusyComponent);
                /** @type {?} */
                var injector = i0.Injector.create({
                    providers: [
                        {
                            provide: 'instanceConfigHolder',
                            useValue: this.instanceConfigHolder
                        },
                        {
                            provide: 'busyEmitter',
                            useValue: this.busyEmitter
                        }
                    ], parent: this.injector
                });
                this.template = this.optionsNorm.template;
                this.busyRef = this.vcr.createComponent(factory, 0, injector, this.generateNgContent(injector));
            };
        /**
         * @param {?} injector
         * @return {?}
         */
        NgBusyDirective.prototype.generateNgContent = /**
         * @param {?} injector
         * @return {?}
         */
            function (injector) {
                if (typeof this.template === 'string') {
                    /** @type {?} */
                    var element = this.renderer.createText(this.template);
                    return [[element]];
                }
                if (this.template instanceof i0.TemplateRef) {
                    /** @type {?} */
                    var context = {};
                    /** @type {?} */
                    var viewRef = this.template.createEmbeddedView(context);
                    return [viewRef.rootNodes];
                }
                /** @type {?} */
                var factory = this.resolver.resolveComponentFactory(this.template);
                /** @type {?} */
                var componentRef = factory.create(injector);
                componentRef.instance.templateNgStyle = this.options.templateNgStyle;
                this.componentViewRef = componentRef.hostView;
                this.appRef.attachView(this.componentViewRef);
                return [[componentRef.location.nativeElement]];
            };
        NgBusyDirective.decorators = [
            { type: i0.Directive, args: [{
                        selector: '[ngBusy]',
                        providers: [BusyTrackerService, InstanceConfigHolderService]
                    },] },
        ];
        /** @nocollapse */
        NgBusyDirective.ctorParameters = function () {
            return [
                { type: BusyConfigHolderService },
                { type: InstanceConfigHolderService },
                { type: i0.ComponentFactoryResolver },
                { type: BusyTrackerService },
                { type: i0.ApplicationRef },
                { type: i0.ViewContainerRef },
                { type: i0.ElementRef },
                { type: i0.Renderer2 },
                { type: i0.Injector }
            ];
        };
        NgBusyDirective.propDecorators = {
            options: [{ type: i0.Input, args: ['ngBusy',] }],
            busyStart: [{ type: i0.Output }],
            busyStop: [{ type: i0.Output }]
        };
        return NgBusyDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgBusyModule = /** @class */ (function () {
        function NgBusyModule() {
        }
        /**
         * @param {?} config
         * @return {?}
         */
        NgBusyModule.forRoot = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                return {
                    ngModule: NgBusyModule,
                    providers: [
                        { provide: BusyConfig, useValue: config }
                    ]
                };
            };
        NgBusyModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [DefaultBusyComponent, NgBusyDirective, NgBusyComponent],
                        providers: [BusyConfigHolderService, BusyTrackerService],
                        exports: [NgBusyDirective],
                        entryComponents: [DefaultBusyComponent, NgBusyComponent]
                    },] },
        ];
        return NgBusyModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgBusyDirective = NgBusyDirective;
    exports.InstanceConfigHolderService = InstanceConfigHolderService;
    exports.NgBusyModule = NgBusyModule;
    exports.BusyConfig = BusyConfig;
    exports.DefaultBusyComponent = DefaultBusyComponent;
    exports.BUSY_CONFIG_DEFAULTS = BUSY_CONFIG_DEFAULTS;
    exports.ɵc = NgBusyComponent;
    exports.ɵb = BusyConfigHolderService;
    exports.ɵa = BusyTrackerService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctYnVzeS51bWQuanMubWFwIiwic291cmNlcyI6W251bGwsIm5nOi8vbmctYnVzeS9saWIvc2VydmljZS9pbnN0YW5jZS1jb25maWctaG9sZGVyLnNlcnZpY2UudHMiLCJuZzovL25nLWJ1c3kvbGliL21vZGVsL2J1c3ktY29uZmlnLnRzIiwibmc6Ly9uZy1idXN5L2xpYi91dGlsL2lzUHJvbWlzZS50cyIsIm5nOi8vbmctYnVzeS9saWIvc2VydmljZS9idXN5LXRyYWNrZXIuc2VydmljZS50cyIsIm5nOi8vbmctYnVzeS9saWIvc2VydmljZS9idXN5LWNvbmZpZy1ob2xkZXIuc2VydmljZS50cyIsIm5nOi8vbmctYnVzeS9saWIvY29tcG9uZW50L25nLWJ1c3kvbmctYnVzeS5jb21wb25lbnQudHMiLCJuZzovL25nLWJ1c3kvbGliL25nLWJ1c3kuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy1idXN5L2xpYi9uZy1idXN5Lm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7SUJ1c3lDb25maWd9IGZyb20gJy4uL21vZGVsL2J1c3ktY29uZmlnJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VDb25maWdIb2xkZXJTZXJ2aWNlIHtcbiAgcHVibGljIGNvbmZpZzogSUJ1c3lDb25maWc7XG4gIGNvbnN0cnVjdG9yKCkgeyB9XG59XG4iLCJpbXBvcnQge1N1YnNjcmlwdGlvbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQge0NvbXBvbmVudCwgVGVtcGxhdGVSZWYsIFR5cGUsIEluamVjdCwgQ2hhbmdlRGV0ZWN0b3JSZWZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtJbnN0YW5jZUNvbmZpZ0hvbGRlclNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2UvaW5zdGFuY2UtY29uZmlnLWhvbGRlci5zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIEJ1c3lDb25maWcgaW1wbGVtZW50cyBJQnVzeUNvbmZpZyB7XG4gIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+IHwgVHlwZTxhbnk+O1xuICB0ZW1wbGF0ZU5nU3R5bGU6IHt9O1xuICBkZWxheTogbnVtYmVyO1xuICBtaW5EdXJhdGlvbjogbnVtYmVyO1xuICBiYWNrZHJvcDogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB3cmFwcGVyQ2xhc3M6IHN0cmluZztcbiAgZGlzYWJsZUFuaW1hdGlvbjogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IElCdXN5Q29uZmlnID0ge30pIHtcbiAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBPYmplY3Qua2V5cyhCVVNZX0NPTkZJR19ERUZBVUxUUykpIHtcbiAgICAgIHRoaXNbb3B0aW9uXSA9IGNvbmZpZ1tvcHRpb25dICE9PSB1bmRlZmluZWQgPyBjb25maWdbb3B0aW9uXSA6IEJVU1lfQ09ORklHX0RFRkFVTFRTW29wdGlvbl07XG4gICAgfVxuICB9XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2RlZmF1bHQtYnVzeScsXG4gIHRlbXBsYXRlOiBgXG4gICAgICA8ZGl2IGNsYXNzPVwibmctYnVzeS1kZWZhdWx0LXdyYXBwZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibmctYnVzeS1kZWZhdWx0LXNpZ25cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5nLWJ1c3ktZGVmYXVsdC1zcGlubmVyXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFyMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhcjJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXIzXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFyNFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhcjVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXI2XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFyN1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhcjhcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXI5XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFyMTBcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXIxMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhcjEyXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmctYnVzeS1kZWZhdWx0LXRleHRcIj57e21lc3NhZ2V9fTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gIGAsXG59KVxuZXhwb3J0IGNsYXNzIERlZmF1bHRCdXN5Q29tcG9uZW50IHtcblxuICBjb25zdHJ1Y3RvcihASW5qZWN0KCdpbnN0YW5jZUNvbmZpZ0hvbGRlcicpIHByaXZhdGUgaW5zdGFuY2VDb25maWdIb2xkZXI6IEluc3RhbmNlQ29uZmlnSG9sZGVyU2VydmljZSkge1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VDb25maWdIb2xkZXIuY29uZmlnLm1lc3NhZ2U7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQnVzeUNvbmZpZyB7XG4gIHRlbXBsYXRlPzogVGVtcGxhdGVSZWY8YW55PiB8IFR5cGU8YW55PjtcbiAgdGVtcGxhdGVOZ1N0eWxlPzoge307XG4gIGRlbGF5PzogbnVtYmVyO1xuICBtaW5EdXJhdGlvbj86IG51bWJlcjtcbiAgYmFja2Ryb3A/OiBib29sZWFuO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICB3cmFwcGVyQ2xhc3M/OiBzdHJpbmc7XG4gIGJ1c3k/OiBBcnJheTxQcm9taXNlPGFueT4gfCBTdWJzY3JpcHRpb24+O1xuICBkaXNhYmxlQW5pbWF0aW9uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IEJVU1lfQ09ORklHX0RFRkFVTFRTID0ge1xuICB0ZW1wbGF0ZTogRGVmYXVsdEJ1c3lDb21wb25lbnQsXG4gIHRlbXBsYXRlTmdTdHlsZToge30sXG4gIGRlbGF5OiAwLFxuICBtaW5EdXJhdGlvbjogMCxcbiAgYmFja2Ryb3A6IHRydWUsXG4gIG1lc3NhZ2U6ICdQbGVhc2Ugd2FpdC4uLicsXG4gIHdyYXBwZXJDbGFzczogJ25nLWJ1c3knLFxuICBkaXNhYmxlQW5pbWF0aW9uOiBmYWxzZVxufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBpc1Byb21pc2UodmFsdWU6IGFueSk6IHZhbHVlIGlzIFByb21pc2VMaWtlPGFueT4ge1xuICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mICg8YW55PnZhbHVlKS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mICh2YWx1ZSBhcyBhbnkpLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4iLCJpbXBvcnQge0V2ZW50RW1pdHRlciwgSW5qZWN0YWJsZSwgT25EZXN0cm95fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7U3Vic2NyaXB0aW9uLCBmcm9tLCB0aW1lcn0gZnJvbSAncnhqcyc7XG5pbXBvcnQge2lzUHJvbWlzZX0gZnJvbSAnLi4vdXRpbC9pc1Byb21pc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrZXJPcHRpb25zIHtcbiAgbWluRHVyYXRpb246IG51bWJlcjtcbiAgZGVsYXk6IG51bWJlcjtcbiAgYnVzeUxpc3Q6IEFycmF5PFByb21pc2U8YW55PiB8IFN1YnNjcmlwdGlvbj47XG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEJ1c3lUcmFja2VyU2VydmljZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG5cbiAgcHJpdmF0ZSBpc0RlbGF5UHJvY2Vzc2luZyA9IGZhbHNlO1xuICBwcml2YXRlIGlzRHVyYXRpb25Qcm9jZXNzaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgaXNCdXNpZXNQcm9jZXNzaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgYnVzeVF1ZXVlOiBBcnJheTxTdWJzY3JpcHRpb24+ID0gW107XG4gIHByaXZhdGUgX19pc0FjdGl2ZSA9IGZhbHNlO1xuXG4gIG9uU3RhcnRCdXN5OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgb25TdG9wQnVzeTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZ2V0IGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9faXNBY3RpdmU7XG4gIH1cblxuICBzZXQgaXNBY3RpdmUodmFsOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuX19pc0FjdGl2ZSA9PT0gZmFsc2UgJiYgdmFsID09PSB0cnVlICYmIHRoaXMub25TdGFydEJ1c3kpIHtcbiAgICAgIHRoaXMub25TdGFydEJ1c3kuZW1pdCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fX2lzQWN0aXZlID09PSB0cnVlICYmIHZhbCA9PT0gZmFsc2UgJiYgdGhpcy5vblN0b3BCdXN5KSB7XG4gICAgICB0aGlzLmlzQnVzaWVzUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgdGhpcy5vblN0b3BCdXN5LmVtaXQoKTtcbiAgICB9XG4gICAgdGhpcy5fX2lzQWN0aXZlID0gdmFsO1xuICB9XG4gIGdldCBidXN5TGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5idXN5UXVldWU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgbG9hZChvcHRpb25zOiBUcmFja2VyT3B0aW9ucykge1xuICAgIHRoaXMubG9hZEJ1c3lRdWV1ZShvcHRpb25zLmJ1c3lMaXN0KTtcbiAgICB0aGlzLnN0YXJ0TG9hZGluZyhvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQWN0aXZlU3RhdHVzKCkge1xuICAgIHRoaXMuaXNBY3RpdmUgPSB0aGlzLmlzQnVzaWVzUHJvY2Vzc2luZyAmJlxuICAgICAgIXRoaXMuaXNEZWxheVByb2Nlc3NpbmcgJiZcbiAgICAgICh0aGlzLmlzRHVyYXRpb25Qcm9jZXNzaW5nIHx8IHRoaXMuYnVzeVF1ZXVlLmxlbmd0aCA+IDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydExvYWRpbmcob3B0aW9uczogVHJhY2tlck9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuaXNCdXNpZXNQcm9jZXNzaW5nICYmIHRoaXMuYnVzeUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5pc0J1c2llc1Byb2Nlc3NpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5pc0RlbGF5UHJvY2Vzc2luZyA9IHRydWU7XG4gICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVN0YXR1cygpO1xuICAgICAgdGltZXIob3B0aW9ucy5kZWxheSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy5pc0RlbGF5UHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRHVyYXRpb25Qcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMoKTtcbiAgICAgICAgdGltZXIob3B0aW9ucy5taW5EdXJhdGlvbikuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzRHVyYXRpb25Qcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxvYWRCdXN5UXVldWUoYnVzaWVzOiBBcnJheTxQcm9taXNlPGFueT4gfCBTdWJzY3JpcHRpb24+KSB7XG4gICAgYnVzaWVzLmZpbHRlcigoYnVzeSkgPT4ge1xuICAgICAgcmV0dXJuIGJ1c3kgJiYgIWJ1c3kuaGFzT3duUHJvcGVydHkoJ19fbG9hZGVkX21hcmtfYnlfbmdfYnVzeScpO1xuICAgIH0pLmZvckVhY2goKGJ1c3k6IFByb21pc2U8YW55PiB8IFN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGJ1c3ksICdfX2xvYWRlZF9tYXJrX2J5X25nX2J1c3knLCB7XG4gICAgICAgIHZhbHVlOiB0cnVlLCBjb25maWd1cmFibGU6IGZhbHNlLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGxldCBjdXJfYnVzeTtcbiAgICAgIGlmIChpc1Byb21pc2UoYnVzeSkpIHtcbiAgICAgICAgY3VyX2J1c3kgPSBmcm9tKGJ1c3kpLnN1YnNjcmliZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VyX2J1c3kgPSBidXN5O1xuICAgICAgfVxuICAgICAgdGhpcy5hcHBlbmRUb1F1ZXVlKGN1cl9idXN5KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXBwZW5kVG9RdWV1ZShidXN5OiBTdWJzY3JpcHRpb24pIHtcbiAgICB0aGlzLmJ1c3lRdWV1ZS5wdXNoKGJ1c3kpO1xuICAgIGJ1c3kuYWRkKCgpID0+IHtcbiAgICAgIHRoaXMuYnVzeVF1ZXVlID0gdGhpcy5idXN5UXVldWUuZmlsdGVyKChjdXI6IFN1YnNjcmlwdGlvbikgPT4gIWN1ci5jbG9zZWQpO1xuICAgICAgdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICB9XG59XG4iLCJpbXBvcnQge0luamVjdGFibGUsIE9wdGlvbmFsfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7QlVTWV9DT05GSUdfREVGQVVMVFMsIEJ1c3lDb25maWd9IGZyb20gJy4uL21vZGVsL2J1c3ktY29uZmlnJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgQnVzeUNvbmZpZ0hvbGRlclNlcnZpY2Uge1xuICBjb25maWc6IEJ1c3lDb25maWc7XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgY29uZmlnOiBCdXN5Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBCVVNZX0NPTkZJR19ERUZBVUxUUywgY29uZmlnIHx8IG5ldyBCdXN5Q29uZmlnKCkpO1xuICB9XG59XG4iLCJpbXBvcnQge0NoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBPbkRlc3Ryb3l9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHthbmltYXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlcn0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbn0gZnJvbSAncnhqcy9pbnRlcm5hbC9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHtOZ0J1c3lEaXJlY3RpdmV9IGZyb20gJy4uLy4uL25nLWJ1c3kuZGlyZWN0aXZlJztcbmltcG9ydCB7SW5zdGFuY2VDb25maWdIb2xkZXJTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2luc3RhbmNlLWNvbmZpZy1ob2xkZXIuc2VydmljZSc7XG5cbmNvbnN0IGluYWN0aXZlU3R5bGUgPSBzdHlsZSh7XG4gIG9wYWNpdHk6IDAsXG4gIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTQwcHgpJ1xufSk7XG5jb25zdCB0aW1pbmcgPSAnLjNzIGVhc2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWItbmctYnVzeScsXG4gIHRlbXBsYXRlOiBgPGRpdiBbY2xhc3NdPVwid3JhcHBlckNsYXNzXCIgQGZseUluT3V0IFtALmRpc2FibGVkXT1cImRpc2FibGVBbmltYXRpb25cIiAqbmdJZj1cImlzQWN0aXZlXCI+XG4gIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cIm5nLWJ1c3ktYmFja2Ryb3BcIiBAZmx5SW5PdXQgW0AuZGlzYWJsZWRdPVwiZGlzYWJsZUFuaW1hdGlvblwiICpuZ0lmPVwic2hvd0JhY2tkcm9wICYmIGlzQWN0aXZlXCI+XG48L2Rpdj5cbmAsXG4gIHN0eWxlczogW2BgXSxcbiAgYW5pbWF0aW9uczogW1xuICAgIHRyaWdnZXIoJ2ZseUluT3V0JywgW1xuICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiAqJywgW1xuICAgICAgICBpbmFjdGl2ZVN0eWxlLFxuICAgICAgICBhbmltYXRlKHRpbWluZylcbiAgICAgIF0pLFxuICAgICAgdHJhbnNpdGlvbignKiA9PiB2b2lkJywgW1xuICAgICAgICBhbmltYXRlKHRpbWluZywgaW5hY3RpdmVTdHlsZSlcbiAgICAgIF0pXG4gICAgXSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBOZ0J1c3lDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuXG4gIHB1YmxpYyB3cmFwcGVyQ2xhc3M6IHN0cmluZztcbiAgcHVibGljIGRpc2FibGVBbmltYXRpb24gPSBmYWxzZTtcbiAgcHVibGljIHNob3dCYWNrZHJvcCA9IHRydWU7XG4gIHByaXZhdGUgcmVhZG9ubHkgYnVzeU1vbml0b3I6IFN1YnNjcmlwdGlvbjtcbiAgaXNBY3RpdmUgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KCdpbnN0YW5jZUNvbmZpZ0hvbGRlcicpIHByaXZhdGUgaW5zdGFuY2VDb25maWdIb2xkZXI6IEluc3RhbmNlQ29uZmlnSG9sZGVyU2VydmljZSxcbiAgICBASW5qZWN0KCdidXN5RW1pdHRlcicpIHByaXZhdGUgYnVzeUVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxib29sZWFuPixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7XG4gICAgdGhpcy5idXN5TW9uaXRvciA9IHRoaXMuYnVzeUVtaXR0ZXIuc3Vic2NyaWJlKChpc0FjdGl2ZTogYm9vbGVhbikgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5pbnN0YW5jZUNvbmZpZ0hvbGRlci5jb25maWc7XG4gICAgICB0aGlzLmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgICB0aGlzLndyYXBwZXJDbGFzcyA9IGNvbmZpZy53cmFwcGVyQ2xhc3M7XG4gICAgICB0aGlzLnNob3dCYWNrZHJvcCA9IGNvbmZpZy5iYWNrZHJvcDtcbiAgICAgIHRoaXMuZGlzYWJsZUFuaW1hdGlvbiA9IGNvbmZpZy5kaXNhYmxlQW5pbWF0aW9uO1xuICAgICAgaWYgKHRoaXMuY2RyKSB7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYnVzeU1vbml0b3IpIHtcbiAgICAgIHRoaXMuYnVzeU1vbml0b3IudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxufVxuIiwiaW1wb3J0IHtcbiAgQXBwbGljYXRpb25SZWYsXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29tcG9uZW50UmVmLFxuICBEaXJlY3RpdmUsIERvQ2hlY2ssXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlciwgSW5qZWN0b3IsXG4gIElucHV0LCBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbiAgUmVuZGVyZXIyLFxuICBUZW1wbGF0ZVJlZiwgVHlwZSxcbiAgVmlld0NvbnRhaW5lclJlZlxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZpZXdSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlL3NyYy9saW5rZXIvdmlld19yZWYnO1xuaW1wb3J0IHsgQnVzeVRyYWNrZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2J1c3ktdHJhY2tlci5zZXJ2aWNlJztcbmltcG9ydCB7IEJ1c3lDb25maWdIb2xkZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2J1c3ktY29uZmlnLWhvbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSUJ1c3lDb25maWcgfSBmcm9tICcuL21vZGVsL2J1c3ktY29uZmlnJztcbmltcG9ydCB7IE5nQnVzeUNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50L25nLWJ1c3kvbmctYnVzeS5jb21wb25lbnQnO1xuaW1wb3J0IHsgSW5zdGFuY2VDb25maWdIb2xkZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2luc3RhbmNlLWNvbmZpZy1ob2xkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tICcuL3V0aWwvaXNQcm9taXNlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW25nQnVzeV0nLFxuICBwcm92aWRlcnM6IFtCdXN5VHJhY2tlclNlcnZpY2UsIEluc3RhbmNlQ29uZmlnSG9sZGVyU2VydmljZV1cbn0pXG5leHBvcnQgY2xhc3MgTmdCdXN5RGlyZWN0aXZlIGltcGxlbWVudHMgRG9DaGVjaywgT25EZXN0cm95IHtcbiAgQElucHV0KCduZ0J1c3knKVxuICBzZXQgb3B0aW9ucyhvcCkge1xuICAgIHRoaXMuX29wdGlvbiA9IG9wO1xuICB9XG5cbiAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbjtcbiAgfVxuXG4gIEBPdXRwdXQoKSBidXN5U3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBidXN5U3RvcCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgcHJpdmF0ZSBvcHRpb25zTm9ybTogSUJ1c3lDb25maWc7XG4gIHByaXZhdGUgYnVzeVJlZjogQ29tcG9uZW50UmVmPE5nQnVzeUNvbXBvbmVudD47XG4gIHByaXZhdGUgY29tcG9uZW50Vmlld1JlZjogVmlld1JlZjtcbiAgcHJpdmF0ZSBvblN0YXJ0U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgb25TdG9wU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgaXNMb2FkaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgYnVzeUVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcbiAgcHVibGljIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+IHwgVHlwZTxhbnk+O1xuICBwdWJsaWMgdGVtcGxhdGVOZ1N0eWxlOiB7fTtcbiAgcHJpdmF0ZSBfb3B0aW9uOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWdIb2xkZXI6IEJ1c3lDb25maWdIb2xkZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgaW5zdGFuY2VDb25maWdIb2xkZXI6IEluc3RhbmNlQ29uZmlnSG9sZGVyU2VydmljZSxcbiAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgcHJpdmF0ZSB0cmFja2VyOiBCdXN5VHJhY2tlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBhcHBSZWY6IEFwcGxpY2F0aW9uUmVmLFxuICAgIHByaXZhdGUgdmNyOiBWaWV3Q29udGFpbmVyUmVmLFxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcbiAgICB0aGlzLm9uU3RhcnRTdWJzY3JpcHRpb24gPSB0cmFja2VyLm9uU3RhcnRCdXN5LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5yZWNyZWF0ZUJ1c3lJZk5lY2Vzc2FyeSgpO1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuYnVzeUVtaXR0ZXIuZW1pdCh0aGlzLmlzTG9hZGluZyk7XG4gICAgICAgIHRoaXMuYnVzeVN0YXJ0LmVtaXQoKTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICAgIHRoaXMub25TdG9wU3Vic2NyaXB0aW9uID0gdHJhY2tlci5vblN0b3BCdXN5LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5idXN5RW1pdHRlci5lbWl0KHRoaXMuaXNMb2FkaW5nKTtcbiAgICAgIHRoaXMuYnVzeVN0b3AuZW1pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdEb0NoZWNrKCkge1xuICAgIHRoaXMub3B0aW9uc05vcm0gPSB0aGlzLm5vcm1hbGl6ZU9wdGlvbnModGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLmluc3RhbmNlQ29uZmlnSG9sZGVyLmNvbmZpZyA9IHRoaXMub3B0aW9uc05vcm07XG4gICAgdGhpcy50cmFja2VyLmxvYWQoe1xuICAgICAgYnVzeUxpc3Q6IHRoaXMub3B0aW9uc05vcm0uYnVzeSxcbiAgICAgIGRlbGF5OiB0aGlzLm9wdGlvbnNOb3JtLmRlbGF5LFxuICAgICAgbWluRHVyYXRpb246IHRoaXMub3B0aW9uc05vcm0ubWluRHVyYXRpb25cbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveUNvbXBvbmVudHMoKTtcbiAgICB0aGlzLm9uU3RhcnRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLm9uU3RvcFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNyZWF0ZUJ1c3lJZk5lY2Vzc2FyeSgpIHtcbiAgICBpZiAoIXRoaXMuYnVzeVJlZlxuICAgICAgfHwgdGhpcy50ZW1wbGF0ZSAhPT0gdGhpcy5vcHRpb25zTm9ybS50ZW1wbGF0ZVxuICAgICAgfHwgdGhpcy50ZW1wbGF0ZU5nU3R5bGUgIT09IHRoaXMub3B0aW9uc05vcm0udGVtcGxhdGVOZ1N0eWxlXG4gICAgKSB7XG4gICAgICB0aGlzLmRlc3Ryb3lDb21wb25lbnRzKCk7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5vcHRpb25zTm9ybS50ZW1wbGF0ZTtcbiAgICAgIHRoaXMudGVtcGxhdGVOZ1N0eWxlID0gdGhpcy5vcHRpb25zTm9ybS50ZW1wbGF0ZU5nU3R5bGU7XG4gICAgICB0aGlzLmNyZWF0ZUJ1c3koKTtcbiAgICAgIHRoaXMuYnVzeUVtaXR0ZXIuZW1pdCh0aGlzLmlzTG9hZGluZyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVPcHRpb25zKG9wdGlvbnM6IGFueSk6IElCdXN5Q29uZmlnIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7IGJ1c3k6IFtdIH07XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpXG4gICAgICB8fCBpc1Byb21pc2Uob3B0aW9ucylcbiAgICAgIHx8IG9wdGlvbnMgaW5zdGFuY2VvZiBTdWJzY3JpcHRpb25cbiAgICApIHtcbiAgICAgIG9wdGlvbnMgPSB7IGJ1c3k6IG9wdGlvbnMgfTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlnSG9sZGVyLmNvbmZpZywgb3B0aW9ucyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMuYnVzeSkpIHtcbiAgICAgIG9wdGlvbnMuYnVzeSA9IFtvcHRpb25zLmJ1c3ldO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgZGVzdHJveUNvbXBvbmVudHMoKSB7XG4gICAgaWYgKHRoaXMuYnVzeVJlZikge1xuICAgICAgdGhpcy5idXN5UmVmLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29tcG9uZW50Vmlld1JlZikge1xuICAgICAgdGhpcy5hcHBSZWYuZGV0YWNoVmlldyh0aGlzLmNvbXBvbmVudFZpZXdSZWYpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQnVzeSgpIHtcbiAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShOZ0J1c3lDb21wb25lbnQpO1xuICAgIGNvbnN0IGluamVjdG9yID0gSW5qZWN0b3IuY3JlYXRlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogJ2luc3RhbmNlQ29uZmlnSG9sZGVyJyxcbiAgICAgICAgICB1c2VWYWx1ZTogdGhpcy5pbnN0YW5jZUNvbmZpZ0hvbGRlclxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogJ2J1c3lFbWl0dGVyJyxcbiAgICAgICAgICB1c2VWYWx1ZTogdGhpcy5idXN5RW1pdHRlclxuICAgICAgICB9XG4gICAgICBdLCBwYXJlbnQ6IHRoaXMuaW5qZWN0b3JcbiAgICB9KTtcbiAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5vcHRpb25zTm9ybS50ZW1wbGF0ZTtcbiAgICB0aGlzLmJ1c3lSZWYgPSB0aGlzLnZjci5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSwgMCwgaW5qZWN0b3IsIHRoaXMuZ2VuZXJhdGVOZ0NvbnRlbnQoaW5qZWN0b3IpKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVOZ0NvbnRlbnQoaW5qZWN0b3I6IEluamVjdG9yKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlVGV4dCh0aGlzLnRlbXBsYXRlKTtcbiAgICAgIHJldHVybiBbW2VsZW1lbnRdXTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGVtcGxhdGUgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xuICAgICAgY29uc3QgY29udGV4dCA9IHt9O1xuICAgICAgY29uc3Qgdmlld1JlZiA9IHRoaXMudGVtcGxhdGUuY3JlYXRlRW1iZWRkZWRWaWV3KGNvbnRleHQpO1xuICAgICAgcmV0dXJuIFt2aWV3UmVmLnJvb3ROb2Rlc107XG4gICAgfVxuICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KHRoaXMudGVtcGxhdGUpO1xuICAgIGNvbnN0IGNvbXBvbmVudFJlZiA9IGZhY3RvcnkuY3JlYXRlKGluamVjdG9yKTtcbiAgICBjb21wb25lbnRSZWYuaW5zdGFuY2UudGVtcGxhdGVOZ1N0eWxlID0gdGhpcy5vcHRpb25zLnRlbXBsYXRlTmdTdHlsZTtcbiAgICB0aGlzLmNvbXBvbmVudFZpZXdSZWYgPSBjb21wb25lbnRSZWYuaG9zdFZpZXc7XG4gICAgdGhpcy5hcHBSZWYuYXR0YWNoVmlldyh0aGlzLmNvbXBvbmVudFZpZXdSZWYpO1xuICAgIHJldHVybiBbW2NvbXBvbmVudFJlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50XV07XG4gIH1cblxufVxuIiwiaW1wb3J0IHtNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0J1c3lDb25maWcsIERlZmF1bHRCdXN5Q29tcG9uZW50LCBJQnVzeUNvbmZpZ30gZnJvbSAnLi9tb2RlbC9idXN5LWNvbmZpZyc7XG5pbXBvcnQge0NvbW1vbk1vZHVsZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7QnVzeVRyYWNrZXJTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2UvYnVzeS10cmFja2VyLnNlcnZpY2UnO1xuaW1wb3J0IHtCdXN5Q29uZmlnSG9sZGVyU2VydmljZX0gZnJvbSAnLi9zZXJ2aWNlL2J1c3ktY29uZmlnLWhvbGRlci5zZXJ2aWNlJztcbmltcG9ydCB7TmdCdXN5RGlyZWN0aXZlfSBmcm9tICcuL25nLWJ1c3kuZGlyZWN0aXZlJztcbmltcG9ydCB7TmdCdXN5Q29tcG9uZW50fSBmcm9tICcuL2NvbXBvbmVudC9uZy1idXN5L25nLWJ1c3kuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW0RlZmF1bHRCdXN5Q29tcG9uZW50LCBOZ0J1c3lEaXJlY3RpdmUsIE5nQnVzeUNvbXBvbmVudF0sXG4gIHByb3ZpZGVyczogW0J1c3lDb25maWdIb2xkZXJTZXJ2aWNlLCBCdXN5VHJhY2tlclNlcnZpY2VdLFxuICBleHBvcnRzOiBbTmdCdXN5RGlyZWN0aXZlXSxcbiAgZW50cnlDb21wb25lbnRzOiBbRGVmYXVsdEJ1c3lDb21wb25lbnQsIE5nQnVzeUNvbXBvbmVudF1cbn0pXG5leHBvcnQgY2xhc3MgTmdCdXN5TW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBJQnVzeUNvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogTmdCdXN5TW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtwcm92aWRlOiBCdXN5Q29uZmlnLCB1c2VWYWx1ZTogY29uZmlnfVxuICAgICAgXVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJJbmplY3RhYmxlIiwidHNsaWJfMS5fX3ZhbHVlcyIsIkNvbXBvbmVudCIsIkluamVjdCIsIkV2ZW50RW1pdHRlciIsInRpbWVyIiwiZnJvbSIsIk9wdGlvbmFsIiwic3R5bGUiLCJ0cmlnZ2VyIiwidHJhbnNpdGlvbiIsImFuaW1hdGUiLCJDaGFuZ2VEZXRlY3RvclJlZiIsIlN1YnNjcmlwdGlvbiIsIkluamVjdG9yIiwiVGVtcGxhdGVSZWYiLCJEaXJlY3RpdmUiLCJDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIiLCJBcHBsaWNhdGlvblJlZiIsIlZpZXdDb250YWluZXJSZWYiLCJFbGVtZW50UmVmIiwiUmVuZGVyZXIyIiwiSW5wdXQiLCJPdXRwdXQiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0lBQUE7Ozs7Ozs7Ozs7Ozs7O0FBY0Esc0JBNEZ5QixDQUFDO1FBQ3RCLElBQUksQ0FBQyxHQUFHLE9BQU8sTUFBTSxLQUFLLFVBQVUsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDO1lBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLE9BQU87WUFDSCxJQUFJLEVBQUU7Z0JBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNO29CQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztnQkFDbkMsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7YUFDM0M7U0FDSixDQUFDO0lBQ04sQ0FBQzs7Ozs7O0FDbkhEO1FBUUU7U0FBaUI7O29CQUxsQkEsYUFBVSxTQUFDO3dCQUNWLFVBQVUsRUFBRSxNQUFNO3FCQUNuQjs7Ozs7MENBTEQ7Ozs7Ozs7UUNJQTtRQVVFLG9CQUFZLE1B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